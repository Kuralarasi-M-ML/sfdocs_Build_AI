"use strict";(self.webpackChunksf_documentation=self.webpackChunksf_documentation||[]).push([[9176],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(a),m=o,k=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(k,r(r({ref:t},c),{},{components:a})):n.createElement(k,r({ref:t},c))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var p=2;p<i;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3242:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var n=a(3117),o=a(102),i=(a(7294),a(3905)),r=["components"],s={},l="Setting up SnappyFlow in your own environment",p={unversionedId:"Quick_Start/snappyflow_self_hosted",id:"Quick_Start/snappyflow_self_hosted",title:"Setting up SnappyFlow in your own environment",description:"SnappyFlow can be consumed via SnappyFlow Cloud or it can be setup in your own environment such as on-prem data center or it can be setup in your cloud account in AWS and Azure.",source:"@site/docs/Quick_Start/snappyflow_self_hosted.md",sourceDirName:"Quick_Start",slug:"/Quick_Start/snappyflow_self_hosted",permalink:"/docs/Quick_Start/snappyflow_self_hosted",editUrl:"https://github.com/ram-dot-kumar/SFwebsite.git/docs/Quick_Start/snappyflow_self_hosted.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Kubernetes Monitoring with sfPod",permalink:"/docs/Integrations/kubernetes/kubernetes_monitoring_with_sfPod"},next:{title:"What Is SfPoller?",permalink:"/docs/sfPoller/overview"}},c={},u=[{value:"What you need to get started",id:"what-you-need-to-get-started",level:2},{value:"Size your infrastructure using the sizing tool",id:"size-your-infrastructure-using-the-sizing-tool",level:2},{value:"Total ingest rate",id:"total-ingest-rate",level:3},{value:"Data retention",id:"data-retention",level:3},{value:"Extended backup",id:"extended-backup",level:3},{value:"Backup for SnappyFlow account data",id:"backup-for-snappyflow-account-data",level:3},{value:"Cost summary",id:"cost-summary",level:3},{value:"Dowload template to create SnappyFlow stack",id:"dowload-template-to-create-snappyflow-stack",level:2},{value:"Create SnappyFlow stack on AWS",id:"create-snappyflow-stack-on-aws",level:2},{value:"Pre-Requisites",id:"pre-requisites",level:3},{value:"Uploading the template",id:"uploading-the-template",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Accessing SnappyFlow server",id:"accessing-snappyflow-server",level:3},{value:"Create SnappyFlow stack on Azure",id:"create-snappyflow-stack-on-azure",level:2},{value:"Pre-Requisites",id:"pre-requisites-1",level:3},{value:"Uploading the template",id:"uploading-the-template-1",level:3},{value:"Configuration",id:"configuration-1",level:3},{value:"Accessing SnappyFlow server",id:"accessing-snappyflow-server-1",level:3}],d={toc:u};function m(e){var t=e.components,a=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"setting-up-snappyflow-in-your-own-environment"},"Setting up SnappyFlow in your own environment"),(0,i.kt)("p",null,"SnappyFlow can be consumed via SnappyFlow Cloud or it can be setup in your own environment such as on-prem data center or it can be setup in your cloud account in AWS and Azure."),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The below guide is applicable for setups with an ",(0,i.kt)("strong",{parentName:"p"},"ingest rate below 500 GB/day"),". For higher ingest rates, reach out to ",(0,i.kt)("a",{parentName:"p",href:"mailto:support@snappyflow.io"},"support@snappyflow.io")))),(0,i.kt)("h2",{id:"what-you-need-to-get-started"},"What you need to get started"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"A SnappyFlow account. An account can be created ",(0,i.kt)("a",{parentName:"p",href:"https://accounts.snappyflow.io"},"here"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"An approximate idea of your monthly ingest rates. The more accurate your data is, the better. This data is useful to ensure right sizing of your infrastructure"))),(0,i.kt)("h2",{id:"size-your-infrastructure-using-the-sizing-tool"},"Size your infrastructure using the sizing tool"),(0,i.kt)("p",null,"SnappyFlow providesHead to accounts.snappyflow.io and use your SnappyFlow credentials to login. Once logged in, click on Pricing Calculator."),(0,i.kt)("p",null,"Choose your cloud platform and select the region where you want to deploy SnappyFlow. The region can be changed at a later stage too."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/select_cloud.png"}),(0,i.kt)("h3",{id:"total-ingest-rate"},"Total ingest rate"),(0,i.kt)("p",null,"In the configuration page, enter the total ingest rate for your stack. This ingest rate is the daily average sum of all logs, metrics and traces. The tool automatically assumes a breakup between logs, metrics and traces and you can also manually adjust this breakup to match your stack needs or leave it at its default value."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/ingest_configuration.png"}),(0,i.kt)("h3",{id:"data-retention"},"Data retention"),(0,i.kt)("p",null,"The next input on data retention defines how long the ingested data is retained in a high-performance storage. A very high data retention can significantly increase storage requirements and costs. "),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/data_retention.png"}),(0,i.kt)("h3",{id:"extended-backup"},"Extended backup"),(0,i.kt)("p",null,"Using extended backup is one way to reduce infrastructure costs. All metrics and logs stored in the backup can easily be retrieved for easy visualizations. This backup is available only for metrics and logs. Any ingested log or metric that ages beyond the primary data retention period defined in the previous section is backed up in a low cost storage service."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/extended_backup.png"}),(0,i.kt)("h3",{id:"backup-for-snappyflow-account-data"},"Backup for SnappyFlow account data"),(0,i.kt)("p",null,"It is recommended to create a backup for SnappyFlow account data. This account data is stored in a dedicated database. This helps in quick recovery in case of cloud infrastructure failures. This database stores all account and configuration information. "),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/dedicated_backup.png"}),(0,i.kt)("p",null,"Click on Calculate Price button to continue."),(0,i.kt)("h3",{id:"cost-summary"},"Cost summary"),(0,i.kt)("p",null,"A summary of the infrastructure required and their cost is provided on the right. By default, a 1 year reserved instance pricing is taken. The tool also provides a list of alternate servers that can be choose either for better performance or for optimizing costs."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/cost_summary.png"}),(0,i.kt)("h2",{id:"dowload-template-to-create-snappyflow-stack"},"Dowload template to create SnappyFlow stack"),(0,i.kt)("p",null,"Click on the Download button at the end of the infrastructure summary to get a template depending on the choice of cloud platform selected."),(0,i.kt)("p",null,"For AWS, a ",(0,i.kt)("inlineCode",{parentName:"p"},"Cloud Formation Template")," is provided."),(0,i.kt)("p",null,"For Azure, a ",(0,i.kt)("inlineCode",{parentName:"p"},"Custom Template")," is provided."),(0,i.kt)("p",null,"These templates are pre-loaded with the required stack information such as server types, quantities and help you quickly launch a SnappyFlow stack."),(0,i.kt)("h2",{id:"create-snappyflow-stack-on-aws"},"Create SnappyFlow stack on AWS"),(0,i.kt)("h3",{id:"pre-requisites"},"Pre-Requisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"AWS account"),(0,i.kt)("li",{parentName:"ul"},"Pre-configured IAM roles with appropriate access levels")),(0,i.kt)("h3",{id:"uploading-the-template"},"Uploading the template"),(0,i.kt)("p",null,"Sign into your AWS console. Search for ",(0,i.kt)("inlineCode",{parentName:"p"},"Cloudformation")," using the search bar on top and select the ",(0,i.kt)("inlineCode",{parentName:"p"},"CloudFormation")," service."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/cloudformation.png"}),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Create Stack")," and select ",(0,i.kt)("inlineCode",{parentName:"p"},"With new resources")," option."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_create_stack.png"}),(0,i.kt)("p",null,"Select ",(0,i.kt)("inlineCode",{parentName:"p"},"Template is ready")," and upload the template provided by SnappyFlow sizing tool and click ",(0,i.kt)("inlineCode",{parentName:"p"},"Next"),"."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_create_stack_2.png"}),(0,i.kt)("h3",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"In this page, provide a stack name and configure subnets and IAM Roles required for the stack."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_stack_configuration.png"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Deployment")),(0,i.kt)("p",null,"Choose Recommended"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Database Type")),(0,i.kt)("p",null,"If a backup for SnappyFlow account is required, choose 'RDS'. Else select 'Local'"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Private Subnet")),(0,i.kt)("p",null,"APM and Opensearch instances will be created under selected Subnets. If RDS is selected as DatabaseType, add two subnets with same VPC and different availability zones, as RDS creation needs to cover all availability zones in the region. APM and Opensearch instances will be created with first subnet(first selection in checkbox) !!!"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If DatabaseType is chosen as RDS, provide two Private Subnets. Without two separate subnets, stack creation will fail."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Public Subnet")),(0,i.kt)("p",null,"Loadbalancer and bastion will be created under this Subnet. Select public subnet of availibility zone same as first PrivateSubnetIds (first selection in checkbox) of same VPC. "),(0,i.kt)("p",null,'For example: If a private subnet with availability zone "a" is selected, a public subnet of availability zone "a" should be added under same VPC, so that the Loadbalancer can forward request to target group of instances.'),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Allowed IP")),(0,i.kt)("p",null,"Provide a list of IP addresses which can access SnappyFlow server"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"KeyName")),(0,i.kt)("p",null,"Provide an existing key for SSH access to SnappyFlow instances"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"IAMRole")),(0,i.kt)("p",null,"Provide an existing IAM Role with appropriate permissions. This is required to discover end points and create a S3 storage required for logs and metric backup."),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Next")," to continue."),(0,i.kt)("p",null,"In the ",(0,i.kt)("inlineCode",{parentName:"p"},"Configure stack options")," screen, provide tags and verify all permissions and other stack creation options."),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Next")," to continue."),(0,i.kt)("p",null,"Review all configuration settings and click on `Create Stack' to create SnappyFlow stack."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_stack_review.png"}),(0,i.kt)("p",null,"Once the stack is successfully created, it should appear under the list of stacks in CloudFormation service."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_stack_complete.png"}),(0,i.kt)("h3",{id:"accessing-snappyflow-server"},"Accessing SnappyFlow server"),(0,i.kt)("p",null,"Click on the stack and select ",(0,i.kt)("inlineCode",{parentName:"p"},"Outputs")," tab"),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_stack_output.png"}),(0,i.kt)("p",null,"SnappyFLow portal can be accessed using the server URL provided here. The default username is  admin and password is the instance id."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/aws_stack_url.png"}),(0,i.kt)("p",null,"SnappyFlow will complete the installation automatically. This process takes upto 30 minutes."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/portal.png"}),(0,i.kt)("h2",{id:"create-snappyflow-stack-on-azure"},"Create SnappyFlow stack on Azure"),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Before downloading the template for Azure, make sure your region has enough quotas for the server types provided in the sizing tool summary. If not, change server type in the sizing tool using drop down option."))),(0,i.kt)("h3",{id:"pre-requisites-1"},"Pre-Requisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Azure account"),(0,i.kt)("li",{parentName:"ul"},"Pre-configured subnets"),(0,i.kt)("li",{parentName:"ul"},"Azure blob storage ")),(0,i.kt)("h3",{id:"uploading-the-template-1"},"Uploading the template"),(0,i.kt)("p",null,"Log into Azure portal and Search for ",(0,i.kt)("inlineCode",{parentName:"p"},"Custom Deployment")," using the search bar on top and select ",(0,i.kt)("inlineCode",{parentName:"p"},"Deploy a custom template"),"."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_custom_template.png"}),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Build your own template in the editor")),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_build_template.png"}),(0,i.kt)("p",null,"You will now see an editor and here you can Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Load file")," to upload the template provided by SnappyFlow sizing tool."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_load_template.png"}),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Save")," to continue."),(0,i.kt)("h3",{id:"configuration-1"},"Configuration"),(0,i.kt)("p",null,"In this page, choose a subscription and resource group that this new stack will be a part of. "),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_template_config.png"}),(0,i.kt)("p",null,"The region is auto populated from template. Provide the Virtual Network Name and Subnet name that you\u2019d like this stack to be part of.  "),(0,i.kt)("p",null,"If access to SnappyFlow is required via open internet, choose true in Public Ip addr field. You can also define the IP addresses that can access the stack or leave it at default for access via internet. "),(0,i.kt)("p",null,"Choose True for System Assigned Identity."),(0,i.kt)("p",null,"To enable SSH access to the stack, you can choose from an existing Admin Username and provide the admin key."),(0,i.kt)("p",null,"Provide a name and key for the backup storage. "),(0,i.kt)("p",null,"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Review + Create")," to proceed."),(0,i.kt)("p",null,"Review all stack details and click on Create. Azure will validate all inputs and start the deployment process."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_template_config.png"}),(0,i.kt)("h3",{id:"accessing-snappyflow-server-1"},"Accessing SnappyFlow server"),(0,i.kt)("p",null,"Once deployment is complete, you will see a deployment complete message."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_template_complete.png"}),(0,i.kt)("p",null,"To access SnappyFlow portal, select the SnappyFlow server VM. You can find this virtual machine under the resource group or subscriptions that was earlier selected. "),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/azure_template_access.png"}),(0,i.kt)("p",null,"Use the public IP address to access the portal. The default username is admin and password is admin. "),(0,i.kt)("p",null,"SnappyFlow will complete the installation automatically. This process takes upto 30 minutes."),(0,i.kt)("img",{src:"/img/snappyflow_self_hosted/portal.png"}))}m.isMDXComponent=!0}}]);