"use strict";(self.webpackChunksf_documentation=self.webpackChunksf_documentation||[]).push([[7258],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),c=i,m=d["".concat(p,".").concat(c)]||d[c]||g[c]||o;return n?a.createElement(m,r(r({ref:t},u),{},{components:n})):a.createElement(m,r({ref:t},u))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var s=2;s<o;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7089:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return g}});var a=n(3117),i=n(102),o=(n(7294),n(3905)),r=["components"],l={},p="Configuration Update Feature (Linux & Windows)",s={unversionedId:"Integrations/plugin/configUpdate",id:"Integrations/plugin/configUpdate",title:"Configuration Update Feature (Linux & Windows)",description:"Overview",source:"@site/docs/Integrations/plugin/configUpdate.md",sourceDirName:"Integrations/plugin",slug:"/Integrations/plugin/configUpdate",permalink:"/docs/Integrations/plugin/configUpdate",editUrl:"https://github.com/ram-dot-kumar/SFwebsite.git/docs/Integrations/plugin/configUpdate.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Clickhouse on Kubernetes",permalink:"/docs/Integrations/clickhouse_kubernetes"},next:{title:"Elastic Load Balancers",permalink:"/docs/Integrations/elb/elb_rds"}},u={},g=[{value:"Overview",id:"overview",level:2},{value:"Prerequisite",id:"prerequisite",level:3},{value:"To upgrade the Linux agent to the latest version",id:"to-upgrade-the-linux-agent-to-the-latest-version",level:3},{value:"To upgrade the windows agent to the latest version",id:"to-upgrade-the-windows-agent-to-the-latest-version",level:3},{value:"Using the Configuration update feature user can update the below files",id:"using-the-configuration-update-feature-user-can-update-the-below-files",level:3},{value:"Below are the options available to update the above files",id:"below-are-the-options-available-to-update-the-above-files",level:3},{value:"Steps to apply agent configuration bundle",id:"steps-to-apply-agent-configuration-bundle",level:3},{value:"Troubleshoot Documentation",id:"troubleshoot-documentation",level:3}],d={toc:g};function c(e){var t=e.components,n=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration-update-feature-linux--windows"},"Configuration Update Feature (Linux & Windows)"),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"Agent Configuration update feature is used to update the configuration in multiple instances at a time without login into each instance. From UI, users can update the config file. "),(0,o.kt)("h3",{id:"prerequisite"},"Prerequisite"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"sfAgent version should be more than v.0.11.21 in Linux"),(0,o.kt)("li",{parentName:"ol"},"sfAgent version should be more than v.0.0.170 in Windows")),(0,o.kt)("h3",{id:"to-upgrade-the-linux-agent-to-the-latest-version"},"To upgrade the Linux agent to the latest version"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"}," wget https://raw.githubusercontent.com/snappyflow/apm-agent/master/install.sh -O install.sh  \n chmod +x install.sh   \n sudo ./install.sh --upgrade \n")),(0,o.kt)("h3",{id:"to-upgrade-the-windows-agent-to-the-latest-version"},"To upgrade the windows agent to the latest version"),(0,o.kt)("p",null,"Refer the following link\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.snappyflow.io/docs/Integrations/os/windows/sfagent_windows"},"https://docs.snappyflow.io/docs/Integrations/os/windows/sfagent_windows")),(0,o.kt)("h3",{id:"using-the-configuration-update-feature-user-can-update-the-below-files"},"Using the Configuration update feature user can update the below files"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"config.yaml file "),(0,o.kt)("li",{parentName:"ol"},"custom_logging_plugins.yaml "),(0,o.kt)("li",{parentName:"ol"},"custom_scripts.lua")),(0,o.kt)("h3",{id:"below-are-the-options-available-to-update-the-above-files"},"Below are the options available to update the above files"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Plugin config update",(0,o.kt)("br",{parentName:"p"}),"\n","To add/remove or update the plugins and logs configuration ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Profile key update",(0,o.kt)("br",{parentName:"p"}),"\n","To update the profile key  ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Tag Update",(0,o.kt)("br",{parentName:"p"}),"\n","To update the tags (Name, appName, projectName) "))),(0,o.kt)("p",null,"In Tag update again contain three options. "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Replace all tags  "),(0,o.kt)("p",{parentName:"li"},"This option will replace all instance tags with applied bundle config tags (Name, appName, tagName are mandatory tags).    ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Insert/Update tags "),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"If a tag is already present in instance config and in bundle config, the bundle config file overrides the existing tags. "),(0,o.kt)("li",{parentName:"ul"},"If a tag is present in bundle config and not present in instance config, the tag which is present in bundle config will be added as a new tag. "),(0,o.kt)("li",{parentName:"ul"},"If a tag is present in instance config and not present in bundle config, the tag is retained from instance config. "),(0,o.kt)("li",{parentName:"ul"},"If the user wants to update only appName and projectName,  the user must remove the Name tag from the config file and upload it. The name field will be retained from the existing config file. "),(0,o.kt)("li",{parentName:"ul"},"Users can also add custom tags. "))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Delete Tags: "),(0,o.kt)("p",{parentName:"li"},"This will remove the custom tags from the configuration file, but the tags that which user wants to delete should be present in both bundle config and instance config. "),(0,o.kt)("img",{src:"/img/delete_tag.png"}))),(0,o.kt)("h3",{id:"steps-to-apply-agent-configuration-bundle"},"Steps to apply agent configuration bundle"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Collect Agent configuration bundle from UI.")," "),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Navigate to the inventory page. "),(0,o.kt)("li",{parentName:"ul"},"Click on the configuration tab "),(0,o.kt)("li",{parentName:"ul"},"Click on collect agent configuration and it will show the downloaded collection. "),(0,o.kt)("li",{parentName:"ul"},"Download the configuration from UI by clicking the download icon under the action tab ",(0,o.kt)("img",{src:"/img/configuration_tab.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"To edit the download bundle, follow the steps below.")),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"It is preferred to use third-party software 7zip to edit the bundle. ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Open the tar file using 7zip software and click on tar file.  "),(0,o.kt)("img",{src:"/img/7zip.png"})),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"It will show the list of files available and edit the file that you want and save. ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"After saving close the editor, it will show the prompt dialog box to update, and click on ok. "),(0,o.kt)("img",{src:"/img/saving_close.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"To Add the downloaded configuration file, follow the below steps.")," "),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Click on three dots under the action tab on the Application Page. "),(0,o.kt)("li",{parentName:"ul"},"Select agent configuration option ",(0,o.kt)("img",{src:"/img/agent_configuration.png"})),(0,o.kt)("li",{parentName:"ul"},"Click on add new bundle option. "),(0,o.kt)("li",{parentName:"ul"},"Upload the bundle which you downloaded from the inventory page and provide the name and description. "),(0,o.kt)("li",{parentName:"ul"},"Click on apply. "))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"To Apply the added bundle")),(0,o.kt)("p",{parentName:"li"},"Config bundle apply can be done in two ways "),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"a. From inventory page")," "),(0,o.kt)("p",{parentName:"li"},"Using this user can apply a bundle for a single instance only at a time. "),(0,o.kt)("p",{parentName:"li"}," ",(0,o.kt)("strong",{parentName:"p"},"Steps:")),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Navigate to the inventory page "),(0,o.kt)("li",{parentName:"ul"},"Click on the configuration tab and select apply configuration. "),(0,o.kt)("li",{parentName:"ul"},"The user must select what changes are needed to apply to the existing config. ",(0,o.kt)("img",{src:"/img/existing_config.png"})),(0,o.kt)("li",{parentName:"ul"},"After applying the bundle if it is a success status shows the applied, its fail status shows Error along with reason. ",(0,o.kt)("img",{src:"/img/fail_status.png"}))),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"b. From agent configuration dialogue box.")),(0,o.kt)("p",{parentName:"li"},"  Using this user can apply a bundle for multiple instances under a single application."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Steps:")," "),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Click on three dots under the action tab on the Application page. "),(0,o.kt)("li",{parentName:"ul"},"Click on apply. "),(0,o.kt)("li",{parentName:"ul"},"Users must select what changes need to apply to the existing config. "),(0,o.kt)("li",{parentName:"ul"},"After applying the bundle if it is a success status shows the applied, its fail status shows Error along with reason. ")))),(0,o.kt)("h3",{id:"troubleshoot-documentation"},"Troubleshoot Documentation"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Error Message/Status")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"What does it mean? When this occurs")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"What user actions take next")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Mapping values are not allowed in this context"),(0,o.kt)("td",{parentName:"tr",align:null},"Might be the wrong indentation added in the config file"),(0,o.kt)("td",{parentName:"tr",align:null},"Check the config file for proper indentation.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Execution time out try again"),(0,o.kt)("td",{parentName:"tr",align:null},"It might be the command server not sending the response to APM."),(0,o.kt)("td",{parentName:"tr",align:null},"Check whether the agent is running or not")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Invalid config file, expected Tag(s) are not provided: Name, appName, projectName"),(0,o.kt)("td",{parentName:"tr",align:null},"Occurred because any one of the tags is missing in the tag section in the config file."),(0,o.kt)("td",{parentName:"tr",align:null},"To update the profile key")))))}c.isMDXComponent=!0}}]);