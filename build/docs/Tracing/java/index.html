<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Java tracing | Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.snappyflow.io//docs/Tracing/java"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Java tracing | Documentation"><meta data-rh="true" name="description" content="sfTrace Java Agent automatically instruments various APIs, frameworks and application servers. Currently sfTrace supports the following:"><meta data-rh="true" property="og:description" content="sfTrace Java Agent automatically instruments various APIs, frameworks and application servers. Currently sfTrace supports the following:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.snappyflow.io//docs/Tracing/java"><link data-rh="true" rel="alternate" href="https://docs.snappyflow.io//docs/Tracing/java" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.snappyflow.io//docs/Tracing/java" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.253e7faa.css">
<link rel="preload" href="/assets/js/runtime~main.a16ec773.js" as="script">
<link rel="preload" href="/assets/js/main.3fb6ddda.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.snappyflow.io/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo-new.png" alt="SnappyFlow" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo-new.png" alt="SnappyFlow" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link" target="_self" class="docs" href="/">Documentation</a><a href="http://snappyflow.io/product" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" docid="Tracing/overview" class="docs"><span>Product<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="http://snappyflow.io/pricing" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="docs"><span>Pricing<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="http://snappyflow.io/blogs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="docs"><span>Blogs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="http://snappyflow.io/success-stories" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="docs"><span>Success Stories<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://accounts.snappyflow.io/freetrial" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="getStart"><span>Free Trial<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://accounts.snappyflow.io/login" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="loginButton"><span>Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/Quick_Start/getting_started">Quick Start Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quick Start Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Integrations/os/linux/sfagent_linux">Monitor a Linux system</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Integrations/os/windows/sfagent_windows">Monitor a Windows system</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Quick_Start/sfpoller_setup">Monitor Cloud Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Integrations/kubernetes/kubernetes_monitoring_with_sfPod">Monitoring a Kubernetes cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Quick_Start/snappyflow_self_hosted">Setup SnappyFlow Self Hosted</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/sfPoller/overview">sfPoller</a><button aria-label="Toggle the collapsible sidebar category &#x27;sfPoller&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/category/tracing">Tracing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tracing&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Tracing/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tracing/python">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tracing/ruby">Ruby</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tracing/nodejs">NodeJS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/Tracing/csharp">C#</a><button aria-label="Toggle the collapsible sidebar category &#x27;C#&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Tracing/go">GO</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/Tracing/advanced/trace_history">Advanced Tracing Feature</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/Integrations/overview">Integrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/profiling">Profiling</a><button aria-label="Toggle the collapsible sidebar category &#x27;Profiling&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/Log_management/log_overview">Log Management</a><button aria-label="Toggle the collapsible sidebar category &#x27;Log Management&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/dashboards">Dashboards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Dashboards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/Alerts_notifications/getting_started">Alerts &amp; Notifications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Alerts &amp; Notifications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/RUM/RUM_documentation">Real User Monitoring</a><button aria-label="Toggle the collapsible sidebar category &#x27;Real User Monitoring&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/category/tracing">Tracing</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/Tracing/java">Java</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Java tracing</h1><p>sfTrace Java Agent automatically instruments various APIs, frameworks and application servers. Currently sfTrace supports the following:  </p><div class="blue_textbox"><b>Supported Java versions</b><p>Oracle JDK: 7u60+, 8u40+, 9, 10, 11 <br>Open JDK: 7u60+, 8u40+, 9, 10, 11 </p><b>Supported Web Frameworks</b><p>Spring Web MVC 4.x, 5.x <br>Spring Boot 1.5+, 2.x supports embedded Tomcat <br>JAX-RS 2.x  <br>JAX-WS  <br></p><b>Supported Application Servers</b><p>Tomcat 7.x, 8.5.x, 9.x <br>Wildfly 8-16 <br>JBoss EAP 6.4, 7.0, 7.1, 7.2</p></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="available-platforms">Available Platforms<a class="hash-link" href="#available-platforms" title="Direct link to heading">​</a></h4><p><a href="/docs/Tracing/java#instances"><strong>Instances</strong></a></p><p><a href="/docs/Tracing/java#docker"><strong>Docker</strong></a></p><p><a href="/docs/Tracing/java#kubernetes"><strong>Kubernetes</strong></a></p><p><a href="/docs/Tracing/java#ecs"><strong>ECS</strong></a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="instances">Instances<a class="hash-link" href="#instances" title="Direct link to heading">​</a></h2><p>Install <a href="/docs/Quick_Start/getting_started#sfagent">sfAgent</a> which automatically installs sfTrace agent as well.</p><p>Link the application with sfTrace Java Agent</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="command-line">Command Line<a class="hash-link" href="#command-line" title="Direct link to heading">​</a></h3><p>Use the following arguments while starting your application using java <code>–jar</code> command, in IDE, Maven or Gradle script: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -javaagent:/opt/sfagent/sftrace/java/sftrace-java-agent.jar -Dsftrace.service_name=&lt;my-service&gt; -jar &lt;application jar&gt; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If <code>service_name</code> is not provided, an auto discovered service name will be added. <code>Service_name</code> is used to identify and filter the traces related to an application and should be named appropriately to distinctly identify it. Service name must only contain characters from the ASCII alphabet, numbers, dashes, underscores and spaces.</p></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="additional-features-available-for-spring-boot-applications">Additional features available for Spring Boot Applications<a class="hash-link" href="#additional-features-available-for-spring-boot-applications" title="Direct link to heading">​</a></h4><p>By default, transaction names of unsupported Servlet API-based frameworks are in the form of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>d</mi><mi>u</mi><mi>n</mi><mi>k</mi><mi>n</mi><mi>o</mi><mi>w</mi><mi>n</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi mathvariant="normal">.</mi><mi>T</mi><mi>o</mi><mi>m</mi><mi>o</mi><mi>d</mi><mi>i</mi><mi>f</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>o</mi><mi>f</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">method unknown route. To modify this and to report the transactions names in the form of </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">u</span><span class="mord mathnormal">nkn</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ore</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">nam</span><span class="mord mathnormal">es</span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord"> </span></span></span></span></span>method $path, use the following in javaagent configuration. This option is applicable only for spring-boot based applications.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.disable_instrumentations=spring-mvc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="normalizing-transaction-urls">Normalizing Transaction URLs<a class="hash-link" href="#normalizing-transaction-urls" title="Direct link to heading">​</a></h4><p>If your URLs contain path parameters like <code>/user/$userId</code>, it can lead to an explosion of transaction types. This can be avoided by using URL groups.
For example, if the application supports urls like: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/owners, /owners/&lt;owner_id&gt;, /owners/&lt;owner_id&gt;/edit, /owners/&lt;owner_id&gt;/pets, </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>then url groups would be configured as: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">url_groups=/owners/*,/owner/*/edit,/owners/*/pets </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="example-of-running-java-application-via-command-line-using-these-parameters">Example of running java application via command line using these parameters<a class="hash-link" href="#example-of-running-java-application-via-command-line-using-these-parameters" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -javaagent:/opt/sfagent/sftrace/java/sftrace-java-agent.jar </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dsftrace.service_name=my-service </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.disable_instrumentations=spring-mvc </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.url_groups=/owners/*,/owner/*/edit,/owners/*/pets -jar &lt;application jar&gt; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="enable-trace-to-log-feature">Enable Trace to Log feature<a class="hash-link" href="#enable-trace-to-log-feature" title="Direct link to heading">​</a></h4><ol><li><p>Add below system property to enable the feature:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We also provide custom document type and destination index configs for this feature.(Optional)</p><p>a. Add below label to provide custom documentType (Default:&quot;log&quot;):</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true,_tag_IndexType=metric&quot; // Applicable values(log, metric)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>b. Add below label to provide custom documentType (Default:&quot;user-input&quot;):</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true,_tag_documentType=&lt;document-type&gt;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><b>Note </b>: <i>-Delastic.apm.capture_body=all properties needs to added when enabling trace to log feature</i><p>Run Command:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -javaagent:/opt/sfagent/sftrace/java/sftrace-java-agent.jar </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dsftrace.service_name=spring-service </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.capture_body=all </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true,_tag_IndexType=&lt;index_type&gt;,_tag_documentType=&lt;document_type&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.metrics_interval=0s -jar target/spring-petclinic-2.1.0.BUILD-SNAPSHOT.jar</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="apache-tomcat">Apache Tomcat<a class="hash-link" href="#apache-tomcat" title="Direct link to heading">​</a></h3><p>Add the agent configuration in setenv.sh. If this file is not present,  create the file in below folder</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;tomcat installation path&gt;/bin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Refer to <a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/tomcat_setenv.sh" target="_blank" rel="noopener noreferrer">tomcat_setenv.sh</a>  for tracing specific configuration that needs to be copied to setenv.sh file.
Make the file executable using <code>chmod +x bin/setenv.sh</code> and start the server</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="additional-features-available-for-spring-boot-applications-1">Additional features available for Spring Boot Applications<a class="hash-link" href="#additional-features-available-for-spring-boot-applications-1" title="Direct link to heading">​</a></h4><p>By default, transaction names of unsupported Servlet API-based frameworks are in the form of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>d</mi><mi>u</mi><mi>n</mi><mi>k</mi><mi>n</mi><mi>o</mi><mi>w</mi><mi>n</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi mathvariant="normal">.</mi><mi>T</mi><mi>o</mi><mi>m</mi><mi>o</mi><mi>d</mi><mi>i</mi><mi>f</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>o</mi><mi>f</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">method unknown route. To modify this and to report the transactions names in the form of </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">u</span><span class="mord mathnormal">nkn</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ore</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">nam</span><span class="mord mathnormal">es</span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord"> </span></span></span></span></span>method $path, use the following in javaagent configuration. This option is applicable only for spring-boot based applications.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.disable_instrumentations=spring-mvc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="normalizing-transaction-urls-1">Normalizing Transaction URLs<a class="hash-link" href="#normalizing-transaction-urls-1" title="Direct link to heading">​</a></h4><p>If your URLs contain path parameters like /user/$userId, it can lead to an explosion of transaction types. This can be avoided by using URL groups.
For example, if the application supports urls like: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/owners, /owners/&lt;owner_id&gt;, /owners/&lt;owner_id&gt;/edit, /owners/&lt;owner_id&gt;/pets, </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>then url groups would be configured as: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">url_groups=/owners/*,/owner/*/edit,/owners/*/pets </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="example-of-running-java-application-via-command-line-using-these-parameters-1">Example of running java application via command line using these parameters<a class="hash-link" href="#example-of-running-java-application-via-command-line-using-these-parameters-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -javaagent:/opt/sfagent/sftrace/java/sftrace-java-agent.jar </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dsftrace.service_name=my-service </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.disable_instrumentations=spring-mvc </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.url_groups=/owners/*,/owner/*/edit,/owners/*/pets -jar &lt;application jar&gt; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="enable-trace-to-log-feature-1">Enable Trace to Log feature<a class="hash-link" href="#enable-trace-to-log-feature-1" title="Direct link to heading">​</a></h4><ol><li><p>Add below system property to enable the feature:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We also provide custom document type and destination index configs for this feature.(Optional)</p><p>a. Add below label to provide custom documentType (Default:&quot;log&quot;):</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true,_tag_IndexType=metric&quot; // Applicable values(log, metric)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>b. Add below label to provide custom documentType (Default:&quot;user-input&quot;):</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true,_tag_documentType=&lt;document-type&gt;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><b>Note </b>: <i>-Delastic.apm.capture_body=all properties needs to added when enabling trace to log feature</i><p>Run Command:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -javaagent:/opt/sfagent/sftrace/java/sftrace-java-agent.jar </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dsftrace.service_name=spring-service </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.capture_body=all </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.global_labels=&quot;_tag_redact_body=true,_tag_IndexType=&lt;index_type&gt;,_tag_documentType=&lt;document_type&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.metrics_interval=0s -jar target/spring-petclinic-2.1.0.BUILD-SNAPSHOT.jar</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="jboss-eap">JBOSS EAP<a class="hash-link" href="#jboss-eap" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="standalone-mode">Standalone Mode<a class="hash-link" href="#standalone-mode" title="Direct link to heading">​</a></h4><p>Add the agent configuration in <code>standalone.conf</code> file and start the server
Refer to <a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/JBOSS_standalone.conf" target="_blank" rel="noopener noreferrer">JBOSS_standalone.conf</a> for tracing specific configuration. Copy from section with <code>SFTRACE-CONFIG</code> in comments </p><h4 class="anchor anchorWithStickyNavbar_mojV" id="domain-mode">Domain Mode<a class="hash-link" href="#domain-mode" title="Direct link to heading">​</a></h4><p>Add the agent configuration in <code>domain.xml</code> and start the server
Refer to <a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/JBOSS_domain.xml" target="_blank" rel="noopener noreferrer">JBOSS_domain.xml</a>  for tracing specific configuration. Copy from section with <code>SFTRACE-CONFIG</code> in comments
After updating the configuration, restart the application. </p><h4 class="anchor anchorWithStickyNavbar_mojV" id="additional-features-available-for-spring-boot-applications-2">Additional features available for Spring Boot Applications<a class="hash-link" href="#additional-features-available-for-spring-boot-applications-2" title="Direct link to heading">​</a></h4><p>By default, transaction names of unsupported Servlet API-based frameworks are in the form of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>d</mi><mi>u</mi><mi>n</mi><mi>k</mi><mi>n</mi><mi>o</mi><mi>w</mi><mi>n</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi mathvariant="normal">.</mi><mi>T</mi><mi>o</mi><mi>m</mi><mi>o</mi><mi>d</mi><mi>i</mi><mi>f</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi>a</mi><mi>n</mi><mi>d</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>o</mi><mi>f</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">method unknown route. To modify this and to report the transactions names in the form of </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">u</span><span class="mord mathnormal">nkn</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ore</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">nam</span><span class="mord mathnormal">es</span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord"> </span></span></span></span></span>method $path, use the following in javaagent configuration. This option is applicable only for spring-boot based applications.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.disable_instrumentations=spring-mvc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="normalizing-transaction-urls-2">Normalizing Transaction URLs<a class="hash-link" href="#normalizing-transaction-urls-2" title="Direct link to heading">​</a></h4><p>If your URLs contain path parameters like /user/$userId, it can lead to an explosion of transaction types. This can be avoided by using URL groups.
For example, if the application supports urls like: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/owners, /owners/&lt;owner_id&gt;, /owners/&lt;owner_id&gt;/edit, /owners/&lt;owner_id&gt;/pets, </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>then url groups would be configured as: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">url_groups=/owners/*,/owner/*/edit,/owners/*/pets </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="example-of-running-java-application-via-command-line-using-these-parameters-2">Example of running java application via command line using these parameters<a class="hash-link" href="#example-of-running-java-application-via-command-line-using-these-parameters-2" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">java -javaagent:/opt/sfagent/sftrace/java/sftrace-java-agent.jar </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dsftrace.service_name=my-service </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.disable_instrumentations=spring-mvc </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.use_path_as_transaction_name=true </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Delastic.apm.url_groups=/owners/*,/owner/*/edit,/owners/*/pets -jar &lt;application jar&gt; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="docker">Docker<a class="hash-link" href="#docker" title="Direct link to heading">​</a></h2><ul><li><p>Refer to <a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/java_Dockerfile" target="_blank" rel="noopener noreferrer">java_Dockerfile</a>. Look at sections with <code>SFTRACE-CONFIG</code> description. </p></li><li><p>Installation steps are provided. Copy the trace agent to the container and start the container by attaching the agent to the application. </p></li><li><p>Additionally, user has to add SnappyFlow configurations for <code>profile_key</code>, <code>projectName</code>, <code>appName</code> to the docker file </p></li><li><p>Once updated, build and start the container.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="kubernetes">Kubernetes<a class="hash-link" href="#kubernetes" title="Direct link to heading">​</a></h2><p>sfTrace is run as an initContainer in the application pod. User can deploy this either using a manifest yaml or a Helm chart.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="example-of-manifest-yaml">Example of Manifest yaml<a class="hash-link" href="#example-of-manifest-yaml" title="Direct link to heading">​</a></h3><p><a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/java_k8s_standalone_deployment.yaml" target="_blank" rel="noopener noreferrer">java_k8s_standalone_deployment.yaml</a>  </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="example-of-a-helm-chart">Example of a Helm chart<a class="hash-link" href="#example-of-a-helm-chart" title="Direct link to heading">​</a></h3><p><strong>Update values.yaml</strong>: Refer to <a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/java_k8s_with_helm_chart_values.yaml" target="_blank" rel="noopener noreferrer">java_k8s_with_helm_chart_values.yaml</a>  to configure agent specific properties. Look at sections with <code>SFTRACE-CONFIG</code> description </p><p><strong>Update deployment.yam</strong>l: Refer to <a href="https://github.com/snappyflow/website-artefacts/blob/master/sfTracing/java/java_k8s_with_helm_chart_deployment.yaml" target="_blank" rel="noopener noreferrer">java_k8s_with_helm_chart_deployment.yaml</a>  to copy trace agent to the container and start the container by attaching  the agent. Look at sections with <code>SFTRACE-CONFIG</code> description</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ecs">ECS<a class="hash-link" href="#ecs" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="create-the-task-definition">Create the Task definition<a class="hash-link" href="#create-the-task-definition" title="Direct link to heading">​</a></h3><ul><li><p>Open Amazon ECS, in navigation pane, choose task definition and click on Create New Task Definition and select the launch type as EC2 or Fargate, click on Next step. </p></li><li><p>Give the Task definition Name </p></li><li><p>Task Role, choose an IAM role that provides permissions for containers in  your task to make calls to AWS APIs on your behalf and Network Mode</p></li><li><p>Click on Add containers. Give a Container name, and give the Image of your Java Application. Set Memory limit and port mappings as per your task requirements. In the environment section, for Entry Point give sh , -c For Command paste the following lines </p></li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /sfagent &amp;&amp; wget -O /sfagent/sftrace-agent.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://github.com/snappyflow/apm-agent/releases/download/latest/sftrace-agent.tar.gz &amp;&amp; cd /sfagent &amp;&amp; tar -xvzf sftrace-agent.tar.gz &amp;&amp; java -javaagent:/sfagent/sftrace/java/sftrace-java-agent.jar -jar &lt;your_jar_name&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Some EC2 task definitions may be running on host containers that don’t recoginise the wget command in such case, add below lines in the above command, apt update &amp;&amp; apt -y upgrade.
Add the following Environment Variables:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SFTRACE_PROJECT_NAME &lt;project_name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SFTRACE_APP_NAME &lt;app_name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SFTRACE_SERVICE_NAME &lt;service_name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SFTRACE_PROFILE_KEY &lt;profile_key&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The below environment variables are only applicable for springmvc and optional.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ELASTIC_APM_DISABLE_INSTRUMENTATIONS spring-mvc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ELASTIC_APM_USE_PATH_AS_TRANSACTION_NAME &quot;true&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="create-the-cluster">Create the Cluster<a class="hash-link" href="#create-the-cluster" title="Direct link to heading">​</a></h3><ul><li>In the Navigation pane, select Clusters and click on Create Cluster</li><li>Select the template as per your requirement</li><li>Give a Cluster name and give instance, networking Configurations IAM role as per your task requirements</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="create-the-service">Create the Service<a class="hash-link" href="#create-the-service" title="Direct link to heading">​</a></h3><ul><li>Click on the Cluster Name you created in the step2</li><li>Click on Create , Select the Launch type matching to your task definition.  Select the Task Definition Name and Version in the Drop down matching to the task definition you created in step 1</li><li>Give a Service Name and select other requirements as per your task compatibility</li><li>Click on next step and start your service</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ram-dot-kumar/SFwebsite.git/docs/Tracing/java.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/category/tracing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tracing</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Tracing/python"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Python tracing</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#instances" class="table-of-contents__link toc-highlight">Instances</a><ul><li><a href="#command-line" class="table-of-contents__link toc-highlight">Command Line</a></li><li><a href="#apache-tomcat" class="table-of-contents__link toc-highlight">Apache Tomcat</a></li><li><a href="#jboss-eap" class="table-of-contents__link toc-highlight">JBOSS EAP</a></li></ul></li><li><a href="#docker" class="table-of-contents__link toc-highlight">Docker</a></li><li><a href="#kubernetes" class="table-of-contents__link toc-highlight">Kubernetes</a><ul><li><a href="#example-of-manifest-yaml" class="table-of-contents__link toc-highlight">Example of Manifest yaml</a></li><li><a href="#example-of-a-helm-chart" class="table-of-contents__link toc-highlight">Example of a Helm chart</a></li></ul></li><li><a href="#ecs" class="table-of-contents__link toc-highlight">ECS</a><ul><li><a href="#create-the-task-definition" class="table-of-contents__link toc-highlight">Create the Task definition</a></li><li><a href="#create-the-cluster" class="table-of-contents__link toc-highlight">Create the Cluster</a></li><li><a href="#create-the-service" class="table-of-contents__link toc-highlight">Create the Service</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a16ec773.js"></script>
<script src="/assets/js/main.3fb6ddda.js"></script>
</body>
</html>